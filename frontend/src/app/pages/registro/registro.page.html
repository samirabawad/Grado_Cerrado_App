<ion-content [fullscreen]="true" class="registro-content">
  <div class="registro-container">
    
    <!-- Logo Principal -->
    <div class="logo-section">
      <img src="assets/image/logo_grado_cerrado.png" alt="Grado Cerrado" class="main-logo">
    </div>
    
    <!-- Contenido del formulario -->
    <div class="content-section">
      <h1 class="main-title">Crear cuenta</h1>
      <p class="main-description">
        Completa tus datos para comenzar tu<br>
        preparación para el examen de grado
      </p>
      
      <!-- Formulario -->
      <div class="form-content">
        
        <!-- Grid para nombres -->
        <div class="name-grid">
          <div class="form-field half-width">
            <label class="field-label">Nombre</label>
            <ion-input 
              class="custom-input"
              type="text" 
              placeholder="Tu nombre"
              [(ngModel)]="nombre"
              maxlength="100">
            </ion-input>
          </div>
          
          <div class="form-field half-width">
            <label class="field-label">Segundo nombre</label>
            <ion-input 
              class="custom-input"
              type="text" 
              placeholder="Opcional"
              [(ngModel)]="segundoNombre"
              maxlength="100">
            </ion-input>
          </div>
        </div>

        <!-- Grid para apellidos -->
        <div class="name-grid">
          <div class="form-field half-width">
            <label class="field-label">Apellido paterno</label>
            <ion-input 
              class="custom-input"
              type="text" 
              placeholder="Apellido paterno"
              [(ngModel)]="apellidoPaterno"
              maxlength="100">
            </ion-input>
          </div>
          
          <div class="form-field half-width">
            <label class="field-label">Apellido materno</label>
            <ion-input 
              class="custom-input"
              type="text" 
              placeholder="Apellido materno"
              [(ngModel)]="apellidoMaterno"
              maxlength="100">
            </ion-input>
          </div>
        </div>

        <!-- Email -->
        <div class="form-field">
          <label class="field-label">Correo electrónico</label>
          <ion-input 
            class="custom-input"
            type="email" 
            placeholder="ejemplo@correo.com"
            [(ngModel)]="correoElectronico"
            maxlength="100">
          </ion-input>
          <div class="error-message" *ngIf="!isEmailValid() && correoElectronico.length > 0">
            Ingresa un email válido
          </div>
        </div>

        <!-- Contraseña -->
        <div class="form-field">
          <label class="field-label">Contraseña</label>
          <ion-input 
            class="custom-input"
            [type]="showPassword ? 'text' : 'password'"
            placeholder="Mínimo 6 caracteres"
            [(ngModel)]="contrasena"
            maxlength="255">
            <ion-button 
              fill="clear" 
              slot="end" 
              (click)="togglePasswordVisibility()">
              <ion-icon [name]="showPassword ? 'eye-off' : 'eye'"></ion-icon>
            </ion-button>
          </ion-input>
        </div>

        <!-- Confirmar Contraseña -->
        <div class="form-field">
          <label class="field-label">Confirmar contraseña</label>
          <ion-input 
            class="custom-input"
            [type]="showConfirmPassword ? 'text' : 'password'"
            placeholder="Repite tu contraseña"
            [(ngModel)]="confirmarContrasena">
            <ion-button 
              fill="clear" 
              slot="end" 
              (click)="toggleConfirmPasswordVisibility()">
              <ion-icon [name]="showConfirmPassword ? 'eye-off' : 'eye'"></ion-icon>
            </ion-button>
          </ion-input>
          <div class="error-message" *ngIf="!isPasswordMatchValid() && confirmarContrasena.length > 0">
            Las contraseñas no coinciden
          </div>
        </div>

      </div>

      <!-- Botones -->
      <div class="button-container">
        <button 
          class="action-button secondary" 
          (click)="goBack()">
          Atrás
        </button>
        <button 
          class="action-button primary" 
          [disabled]="!isFormValid() || isLoading"
          (click)="registrarUsuario()">
          <ion-spinner name="circles" *ngIf="isLoading"></ion-spinner>
          <span *ngIf="!isLoading">Continuar</span>
        </button>
      </div>

      <!-- Link de inicio de sesión -->
      <div class="login-link">
        <span>¿Ya tienes cuenta? </span>
        <span class="link-text" (click)="irAIniciarSesion()">Inicia Sesión</span>
      </div>
      
    </div>
    
  </div>
</ion-content>