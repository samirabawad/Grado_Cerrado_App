<ion-content class="results-content">
  <!-- ✅ HEADER IGUAL QUE TEST-ESCRITO-CIVIL -->
  <div class="dashboard-header">
    <ion-icon name="chevron-back" class="back-icon" (click)="goBack()"></ion-icon>
    <h1 class="header-title">Derecho Civil</h1>
  </div>

  <!-- Contenido principal -->
  <div class="content-area">
    
    <!-- ✅ MENSAJE MOTIVACIONAL GRANDE -->
    <div class="motivational-message">
      <h1 class="main-message">{{ motivationalMessage }}</h1>
    </div>

    <!-- ✅ NIVEL Y MAPACHE MÁS GRANDE -->
    <div class="level-section">
      <div class="mapache-container">
        <img src="assets/image/mok.png" alt="Mapache" class="mapache-large">
      </div>
      <h2 class="level-title">{{ levelTitle }}</h2>
      <p class="level-subtitle">{{ levelSubtitle }}</p>
    </div>

    <!-- ✅ PORCENTAJE Y ESTADÍSTICAS -->
    <div class="stats-card">
      <div class="percentage-main">
        <span class="percentage-value">{{ percentage }}%</span>
        <p class="percentage-label">Puntuación del test</p>
      </div>

      <div class="stats-grid">
        <div class="stat-item correct">
          <div class="stat-icon">
            <ion-icon name="checkmark-circle"></ion-icon>
          </div>
          <div class="stat-info">
            <span class="stat-number">{{ correctAnswers }}</span>
            <span class="stat-label">Correctas</span>
          </div>
        </div>

        <div class="stat-item incorrect">
          <div class="stat-icon">
            <ion-icon name="close-circle"></ion-icon>
          </div>
          <div class="stat-info">
            <span class="stat-number">{{ incorrectAnswers }}</span>
            <span class="stat-label">Incorrectas</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ✅ CÍRCULOS DE PREGUNTAS - CLICKEABLES -->
    <div class="questions-section">
      <h3 class="section-title">Resumen de preguntas</h3>
      <div class="questions-grid">
        <div 
          *ngFor="let question of questionResults; let i = index"
          class="question-circle"
          [class.correct]="question.isCorrect"
          [class.incorrect]="!question.isCorrect"
          (click)="viewQuestionDetail(i)">
          {{ i + 1 }}
        </div>
      </div>
    </div>

    <!-- ✅ BOTÓN VER RESPUESTAS INCORRECTAS -->
    <ion-button 
      *ngIf="incorrectAnswers > 0"
      expand="block" 
      class="view-incorrect-btn"
      (click)="reviewIncorrect()">
      <ion-icon name="eye-outline" slot="start"></ion-icon>
      Ver respuestas incorrectas
    </ion-button>

    <!-- ✅ BOTONES DE ACCIÓN -->
    <div class="action-buttons">
      <ion-button 
        expand="block" 
        class="new-test-btn"
        (click)="takeNewTest()">
        <ion-icon name="refresh-outline" slot="start"></ion-icon>
        Hacer nuevo test
      </ion-button>

      <ion-button 
        expand="block" 
        fill="outline"
        class="home-btn"
        (click)="goToHome()">
        <ion-icon name="home-outline" slot="start"></ion-icon>
        Volver al inicio
      </ion-button>
    </div>

  </div>

  <!-- Bottom Navigation -->
  <app-bottom-nav></app-bottom-nav>

</ion-content>